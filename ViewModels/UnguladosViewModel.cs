using System.Collections.ObjectModel;
using System.Windows.Input;
using caca360.Models;
using CommunityToolkit.Mvvm.ComponentModel;

namespace caca360.ViewModels;

public partial class UnguladosViewModel : ObservableObject
{
    public ObservableCollection<Animal> Ungulados { get; }
    public string Especie { get; } = "Ungulados";

    private Animal? _AnimalSelecionado = null!;

    public Animal? AnimalSelecionado
    {
        get => _AnimalSelecionado;
        set
        {
            if (_AnimalSelecionado != value)
            {
                _AnimalSelecionado = value;
                OnPropertyChanged(nameof(AnimalSelecionado)); // Notifica a UI da seleção
                if (_AnimalSelecionado != null)
                {
                    SelecionarAnimal(_AnimalSelecionado);
                    _AnimalSelecionado = null;
                    OnPropertyChanged(nameof(AnimalSelecionado)); // Notifica a UI da limpeza
                }
            }
        }
    }

    public ICommand SelecionarUnguladosCommand { get; }

    public UnguladosViewModel()
    {
        Ungulados = new ObservableCollection<Animal>
        {
            new() { Nome = "Javali", Descricao = "O javali é um mamífero da família Suidae que, na fase adulta, se caracteriza por uma silhueta compacta e robusta, cabeça grande e afunilada, ausência aparente de pescoço, membros curtos e fortes, com um comprimento total de 1,25 a 1,70 m e peso que pode atingir os 140 Kg nos machos.  \r\nNo javali adulto, os machos podem ser facilmente distinguidos das fêmeas através da sua maior corpulência e presença de caninos ou presas extremamente desenvolvidas numa cabeça mais larga e menos afunilada. Estes dentes, muito característicos da espécie, designam-se por navalhas (caninos inferiores) e amoladeiras (caninos superiores) e constituem o troféu do javali. A pelagem típica de animais adultos é composta por cerdas grossas de tom cinzento ou pardo e, normalmente, é mais escura e densa no Inverno.\r\nPresentemente, o javali ocupa um espaço de relevo entre as espécies de caça maior, sobretudo devido à deslocalização progressiva em Portugal do exercício da caça menor para a prática de caça maior, que se deve, sobretudo, à diminuição progressiva, mas muito marcada, de efetivos de caça menor, tais como o coelho-bravo, a perdiz-vermelha e a rola-comum.", Categoria = "Ungulados", Imagem = "javali2.png", Link="http://especiescinegeticas.pt/especies-cinegeticas/ungulados/javali" },
            new() { Nome = "Veado", Descricao = "O veado é um mamífero artiodáctilo ruminante da família Cervidae que integra espécies de tamanhos muito diferentes, mas, em geral, com membros e pescoço compridos, caudas curtas e cabeças angulares.\r\nO veado é um animal de grande porte, forte, mas ágil e prudente, sendo o maior dos cervídeos da Península Ibérica. Estudos recentes demonstram que os veados da Península Ibérica têm características genéticas únicas e diferentes das presentes nos veados das outras regiões da Europa. Apresentam menor porte e, a sua pelagem é mais clara, acinzentada e menos vermelha. A pelagem dos veados da Península Ibérica apresenta ainda variação sazonal na tonalidade e brilho, sendo castanho-avermelhada durante o Verão e castanho escura no Inverno. No primeiro ano de vida, os veados juvenis apresentam pelagem de um castanho mais escuro, com manchas brancas amareladas distribuídas pelo pescoço e dorso. A cauda do veado é curta e acastanhada e o escudo anal apresenta uma cor amarelada. O comprimento total varia entre os 1,65 m e os 2,5 m. O peso destes animais é variável consoante a região, podendo atingir 250 Kg na Península Ibérica.", Categoria = "Ungulados", Imagem = "veado.png", Link="http://especiescinegeticas.pt/especies-cinegeticas/ungulados/veado" },
            new() { Nome = "Gamo", Descricao = "Atualmente, em todo o mundo, estão descritas duas subespécies de gamo, o gamo europeu (Dama dama dama) e o gamo persa (Dama dama mesopotamica), que apresentam algumas diferenças morfológicas entre si.\r\nO gamo é um cervídeo de porte médio, mais pequeno que o veado, porém, à semelhança deste, apresenta um grande dimorfismo sexual, não apenas caracterizado pelo porte, mas também pela presença de uma estrutura óssea (armação) nos machos. Esta estrutura, no macho adulto, é constituída por duas hastes espalmadas, arredondadas na base. Na parte superior de cada haste, na área espalmada, desenvolvem-se várias pontas. Além disso, a armação é mudada num ciclo anual, caindo entre março e maio, voltando a crescer novas hastes imediatamente. A cabeça do gamo atinge a sua forma característica aos 7 anos de idade.\r\nNestes cervídeos, a altura do garrote média é de 85 cm nos machos e 75 cm nas fêmeas. O peso corporal nos machos varia entre 50 a 70 Kg, nunca ultrapassando os 120 Kg de peso, enquanto o peso das fêmeas varia entre os 28 e 41 Kg. A nível de comprimento total, este varia entre 1,30 a 1,50 m.\r\nOs gamos apresentam duas pelagens diferentes ao longo do ano. Na Primavera e no Verão, a pelagem base apresenta uma coloração geral castanha clara, um pouco arruivada, com manchas brancas distribuídas pelo dorso. No Outono e no Inverno, as manchas brancas desaparecem por completo e a pelagem torna-se mais escura, tendo um tom, em geral, castanho-escuro um pouco acinzentado. No entanto, o ventre e a face interna dos membros conservam sempre a mesma cor esbranquiçada ao longo do ano, embora com uma tonalidade mais escura no Outono e no Inverno. A cauda, relativamente comprida (cerca de 15 cm), é branca com uma risca central negra na face exterior, enquanto o escudo anal, também conhecido por espelho e, que desempenha um papel primordial na comunicação e interação entre indivíduos, é branco e ladeado por duas faixas negras.\r\nO gamo é uma espécie cinegética de caça maior, com estatuto considerado pouco preocupante (LC) pela União Internacional da Conservação da Natureza.", Categoria = "Ungulados", Imagem = "gamo.png", Link="http://especiescinegeticas.pt/especies-cinegeticas/ungulados/gamo"},
            new() { Nome = "Muflão", Descricao = "O muflão é um mamífero artiodáctilo pertencente à família Bovidae. As origens desta espécie não estão completamente esclarecidas e a sua classificação taxonómica continua a gerar alguma controvérsia. No entanto, atualmente existe um maior consenso na literatura em considerar o muflão (Ovis aries musimon) e a ovelha (Ovis aries aries) duas sub-espécies de Ovies aries, sendo o muflão a subespécie selvagem e a ovelha a subespécie doméstica. Alguns autores defendem que o muflão-europeu tem origem em exemplares provenientes das ilhas mediterrânicas da Córsega e da Sardenha, que foram introduzidos, a partir do século XVIII, em diferentes países do continente europeu.\r\nO muflão-europeu é um dos ovinos silvestres mais pequenos do mundo, particularmente quando comparado com os seus parentes asiáticos e algumas raças domésticas. Também designado por carneiro selvagem, a sua altura ao garrote varia entre 65-75 cm, nas fêmeas, e 70-80 cm, nos machos. A massa corporal destes animais oscila entre os 25-35 Kg, nas fêmeas, e os 35-55 Kg, nos machos. Esta espécie apresenta um comprimento total que varia entre 120 a 140 cm. Os membros são longos e finos, terminando, distalmente, nuns pequenos cascos. A cabeça é bem proporcionada em relação ao corpo, apresentando orelhas pequenas, um pescoço longo e fino e uma pequena cauda preta com cerca de 6 cm. Nos machos, é característica a presença de cornos recurvados, de grandes dimensões (até 90 cm de comprimento e 4,5 a 6 Kg de peso) e, por isso, bastante apreciados pelos caçadores como troféu de caça. As fêmeas não apresentam cornos, embora em alguns casos possam apresentar uns pequenos processos cornuais rudimentares que raramente ultrapassam os 6 a 12 cm de comprimento. Possui uma mancha branca à volta da boca, cuja extensão está diretamente relacionada com a idade. Nos animais jovens, a mancha branca encontra-se delimitada pelo bordo distal nasal, enquanto nos muflões mais velhos, a mancha vai-se distribuíndo, centrífugamente, pelo resto da face. A cor, o comprimento e a espessura da pelagem dos muflões é determinada pelo fotoperíodo, sendo mais escura (castanho achocolatado), mais comprida e densa no Inverno, pois nesse período a sua pelagem é constituída por um pêlo de cobertura e por um sub-pêlo sedoso, que confere maior proteção térmica. Na Primavera, a pelagem muda e torna-se menos densa. Em todas as épocas do ano, a cor da pelagem das fêmeas é mais clara. No macho, quando se torna adulto, aparece uma mancha branca de cada lado do dorso, que é designada por cela e que apresenta forma e tamanho variáveis. Esta mancha branca no dorso encontra-se ausente ou é muito menos evidente nas fêmeas. Nesta espécie, a região ventral, de cor branca, é separada da região dorsal por uma linha preta lateral na zona abdominal. As regiões perineal, mandibular e facial, assim como a face interna dos membros, apresentam cor branca, enquanto a face dorsolateral dos membros exibe uma tonalidade mais escura devido à presença de pêlos negros.\r\nO muflão foi introduzido no território continental, sendo uma espécie exótica em Portugal. É uma espécie cinegética de caça maior, cujo estatuto de conservação não se encontra definido na Lista Vermelha da União Internacional para a Conservação da Natureza (IUCN, 2017), nem na mais recente edição do Livro Vermelho dos Vertebrados de Portugal. ", Categoria = "Ungulados", Imagem = "muflao.png", Link="http://especiescinegeticas.pt/especies-cinegeticas/ungulados/muflao"},
            new() { Nome = "Corço", Descricao = "O corço é um mamífero artiodáctilo da família Cervidae.\r\nÉ o mais pequeno e esquivo de todos os cervídeos da Península Ibérica. De estrutura leve, graciosa, mas compacta, é caracterizado pela sua cabeça curta e larga, orelhas grandes (12 a 14 cm), pescoço longo, tronco relativamente curto, cauda muito curta (2 a 4 cm) e membros longos, sendo os membros posteriores maiores que os anteriores e bem-adaptados ao salto. Com um comprimento total de 107 a 126 cm, uma altura de garrote de 66 a 83 cm e um peso corporal de 18 a 32 Kg, o corço europeu distingue-se claramente da espécie siberiana (Capreolus pygargus) pelo seu menor tamanho. O dimorfismo sexual nesta espécie evidencia-se por os machos serem ligeiramente maiores do que as fêmeas, pela presença de hastes nos machos, e pelas diferenças no escudo anal que, nos machos, tem a forma de rim e, nas fêmeas, tem a forma de um coração invertido.\r\nComparativamente com o veado, a armação do corço, uma estrutura óssea constituída por um par de hastes que se desenvolve a partir das rosetas localizadas na parte superior do crânio, é mais pequena e menos ramificada. No macho adulto, cada haste tem no máximo três pontas. O desenvolvimento da armação é influenciado por fatores como a alimentação, estado de saúde, número de animais por hectare, e menos pela idade do animal. A queda das hastes ocorre anualmente nos meses de outubro a novembro, iniciando-se de imediato, ou após cerca de um mês, o crescimento de novas hastes.\r\nEm relação à pelagem, tal como os outros dois cervídeos da Península Ibérica (i.e., veado e gamo), apresenta duas mudas por ano. No Inverno, a pelagem tem um tom castanho-acinzentado, com pêlos mais espessos. No Verão, a pelagem caracteriza-se por pêlos mais finos e curtos, conferindo um tom generalizado castanho-avermelhado, com a zona superior da cabeça cinzenta ou castanha. Geralmente, a coloração da pelagem dos machos é mais intensa do que nas fêmeas, contudo a coloração pode variar bastante com a estação do ano, com determinadas características individuais e com os diferentes ecótipos. Em ambas as fases, a pelagem da parte inferior é mais clara que a do dorso e o escudo anal destaca-se pela cor esbranquiçada.\r\nAs crias apresentam uma pelagem diferente da dos adultos, com pêlos mais escuros e com manchas brancas que desaparecem no Outono. Este cervídeo possui uma excelente capacidade auditiva e olfativa, sendo capaz de detetar o mais pequeno movimento. O olfato muito desenvolvido pode ser claramente evidenciado quando comparado, por exemplo, com a espécie humana, sendo que a superfície e o número de células olfativas são, respetivamente, cinquenta a dez vezes superiores às do Homem.\r\nO corço é uma espécie cinegética de caça maior, com estatuto considerado pouco preocupante (LC) pela União Internacional da Conservação da Natureza.", Categoria = "Ungulados", Imagem = "corco.png", Link="http://especiescinegeticas.pt/especies-cinegeticas/ungulados/corco"},
            new() { Nome = "Cabra-Montês", Descricao = "A cabra-montês é um mamífero ungulado silvestre endémico da Península Ibérica, de porte médio, pertencente à família Bovidae. Apresenta um pronunciado dimorfismo sexual, que se acentua com a idade e se reflete principalmente no tamanho corporal, cor da pelagem e dimensão dos cornos, mais expressivos no macho.\r\nEntre os estudos referentes à taxonomia da espécie, destacam-se os trabalhos de Schinz (1838), Schimper (1848), Schlegel (1872) e Cabrera (1911), nos quais são descritas, respetivamente, as subespécies Capra pyrenaica pyrenaica, C.p.hispanica, C.p.lusitanica e C.p.victoriae. Das quatro subespécies mencionadas, apenas duas ainda persistem: C. p. victoriae e C. p.hispanica. A população de cabra-montês que ocupava toda a região montanhosa do Noroeste da Península Ibérica, pertencia à subespécie C. p. lusitanica. No final do século XIII, registou-se a contração gradual da distribuição desta subespécie, com confinamento das populações à Serra do Gerês (Portugal) e algumas montanhas no sul da Galiza (Espanha), até às sua extinção no início do século XIX. Por sua vez, C.p.pyrenaica ocorria nos Pirinéus e no Parque Nacional de Ordesa, tendo-se extinguido destes últimos refúgios por volta de 2000. A classificação destas quatro subespécies é baseada em critérios geográficos e morfológicos, tais como o padrão negro da pelagem dos machos e a forma e tamanho dos cornos. A elevada variabilidade intraespecífica destas características, influenciadas pela disponibilidade de alimento e condições ambientais, coloca dúvidas no rigor deste sistema de classificação.\r\nEm termos biométricos, o comprimento total dos animais desta espécie varia entre 1 a 1,6 m, nos machos adultos, e entre 0,9 e 1,2 m, nas fêmeas adultas. O peso oscila entre 50-90 Kg, nos machos, e 30-50 Kg nas fêmeas e, a altura ao garrote varia entre 0,65-0,85 e 0,65-0,70 m, em machos e fêmeas, respetivamente. Relativamente à pelagem, estes animais apresentam uma pelagem mais curta no verão, com um tom entre o canela e o ocre. No inverno, a pelagem é mais densa, constituída por um pêlo de cobertura e por um sub-pêlo mais escuros, de um tom camurça-acinzentado. A superfície corporal está também coberta por manchas de pêlos negros, de tamanho e localização variáveis consoante a subespécie, o sexo e a idade. Os machos apresentam ainda manchas negras nos membros, flancos e pescoço, que se expandem com a idade, enquanto as fêmeas exibem manchas negras na região anterior das extremidades dos quatro membros. Ambos os sexos apresentam cornos de carácter persistente, não ramificados e divergentes em forma de lira, com crescimento anual, apesar da armação dos machos ser de maiores dimensões e mais robusta. Nos machos, o comprimento dos cornos varia entre 45 cm e 1 m, enquanto nas fêmeas varia entre 13 a 30 cm e a morfologia é mais cilíndrica.\r\nApesar de, em Espanha, a cabra-montês ser uma espécie cinegética e de manter globalmente um estatuto considerado pouco preocupante (LC) pela União Internacional da Conservação da Natureza, o seu estatuto de conservação a nível nacional, de acordo com o Livro Vermelho dos Vertebrados de Portugal é de criticamente em perigo. Apesar da sua caça ser proibida em Portugal, existem relatos de caça furtiva no Parque Nacional da Peneda-Gerês.  ", Categoria = "Ungulados", Imagem = "cabra.png", Link="http://especiescinegeticas.pt/especies-cinegeticas/ungulados/cabra-montes"},


        };

        SelecionarUnguladosCommand = new Command<Animal>(async animal =>
        {
            if (animal is null)
                return;

            // nUnguladosga para página do animal
            await Shell.Current.GoToAsync($"{nameof(AnimalPage)}?nome={animal.Nome}&descricao={animal.Descricao}&imagem={animal.Imagem}&especie={Especie}&link={animal.Link}");
        });
    }

    private void SelecionarAnimal(Animal animal)
    {
        SelecionarUnguladosCommand.Execute(animal);
    }
}
